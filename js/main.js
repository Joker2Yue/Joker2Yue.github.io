var themeColorMeta,pageHeaderEl,navMusicEl,consoleEl,anzhiyu_musicFirst=!1,anzhiyu_keyboard=null,anzhiyu_musicPlaying=!1,$bodyWrap=document.getElementById("body-wrap"),anzhiyu_intype=!1,anzhiyu_keyUpEvent_timeoutId=null,anzhiyu_keyUpShiftDelayEvent_timeoutId=null,rm=null,popupWindowTimer=null,adjectives=["美丽的","英俊的","聪明的","勇敢的","可爱的","慷慨的","善良的","可靠的","开朗的","成熟的","稳重的","真诚的","幽默的","豁达的","有趣的","活泼的","优雅的","敏捷的","温柔的","温暖的","敬业的","细心的","耐心的","深沉的","朴素的","含蓄的","率直的","开放的","务实的","坚强的","自信的","谦虚的","文静的","深刻的","纯真的","朝气蓬勃的","慎重的","大方的","顽强的","迷人的","机智的","善解人意的","富有想象力的","有魅力的","独立的","好奇的","干净的","宽容的","尊重他人的","体贴的","守信的","有耐性的","有责任心的","有担当的","有远见的","有智慧的","有眼光的","有冒险精神的","有爱心的","有同情心的","喜欢思考的","喜欢学习的","具有批判性思维的","善于表达的","善于沟通的","善于合作的","善于领导的","有激情的","有幽默感的","有思想的","有个性的","有正义感的","有责任感的","有创造力的","有想象力的","有艺术细胞的","有团队精神的","有协调能力的","有决策能力的","有组织能力的","有学习能力的","有执行能力的","有分析能力的","有逻辑思维的","有创新能力的","有专业素养的","有商业头脑的"],vegetablesAndFruits=["萝卜","白菜","芹菜","生菜","青椒","辣椒","茄子","豆角","黄瓜","西红柿","洋葱","大蒜","土豆","南瓜","豆腐","韭菜","花菜","西兰花","蘑菇","金针菇","苹果","香蕉","橙子","柠檬","猕猴桃","草莓","葡萄","桃子","杏子","李子","石榴","西瓜","哈密瓜","蜜瓜","樱桃","蓝莓","柿子","橄榄","柚子","火龙果"],selectRandomSong=[],musicVolume=.8,changeMusicListFlag=!1,defaultPlayMusicList=[];document.addEventListener("DOMContentLoaded",function(){let n,d,e,t=!1;function u(){var e=GLOBAL_CONFIG.highlight;if(e){const{highlightCopy:n,highlightLang:o,highlightHeightLimit:a,plugin:i}=e;e=GLOBAL_CONFIG_SITE.isHighlightShrink;const l=n||o||void 0!==e;var t="highlight.js"===i?document.querySelectorAll("figure.highlight"):document.querySelectorAll('pre[class*="language-"]');if((l||a)&&t.length){const s="prismjs"===i,r=!0===e?"closed":"",c=void 0!==e?'<i class="anzhiyufont anzhiyu-icon-angle-down expand ${highlightShrinkClass}"></i>':"",d=n?'<div class="copy-notice"></div><i class="anzhiyufont anzhiyu-icon-paste copy-button"></i>':"",u=(e,t)=>{if(void 0!==GLOBAL_CONFIG.Snackbar)anzhiyu.snackbarShow(t);else{const n=e.previousElementSibling;n.textContent=t,n.style.opacity=1,setTimeout(()=>{n.style.opacity=0},800)}},m=e=>{var t=e.parentNode,n=(t.classList.add("copy-true"),window.getSelection()),o=document.createRange(),i=s?"pre code":"table .code pre";o.selectNodeContents(t.querySelectorAll(i)[0]),n.removeAllRanges(),n.addRange(o),i=e.lastChild,document.queryCommandSupported&&document.queryCommandSupported("copy")?(document.execCommand("copy"),u(i,GLOBAL_CONFIG.copy.success)):u(i,GLOBAL_CONFIG.copy.noSupport),n.removeAllRanges(),t.classList.remove("copy-true")},y=e=>{e.classList.toggle("closed")},h=function(e){e=e.target.classList;e.contains("expand")?y(this):e.contains("copy-button")&&m(this)},g=function(){this.classList.toggle("expand-done")},p=(e,t,n)=>{var o,i=document.createDocumentFragment();l&&((o=document.createElement("div")).className="highlight-tools "+r,o.innerHTML=c+e+d,anzhiyu.addEventListenerPjax(o,"click",h),i.appendChild(o)),a&&t.offsetHeight>a+30&&((e=document.createElement("div")).className="code-expand-btn",e.innerHTML='<i class="anzhiyufont anzhiyu-icon-angle-double-down"></i>',anzhiyu.addEventListenerPjax(e,"click",g),i.appendChild(e)),"hl"===n?t.insertBefore(i,t.firstChild):t.parentNode.insertBefore(i,t)};s?t.forEach(e=>{var t;o?(t=`<div class="code-lang">${e.getAttribute("data-language")||"Code"}</div>`,anzhiyu.wrap(e,"figure",{class:"highlight"}),p(t,e)):(anzhiyu.wrap(e,"figure",{class:"highlight"}),p("",e))}):t.forEach(t=>{if(o){let e=t.getAttribute("class").split(" ")[1];var n=`<div class="code-lang">${e="plain"!==e&&void 0!==e?e:"Code"}</div>`;p(n,t,"hl")}else p("",t,"hl")})}}}const m=e=>{var t=e=>Array.from(e).reduce((e,t)=>e+t.offsetWidth,0),e=(e&&(e=t(document.querySelector("#blog_name > a").children),t=t(document.getElementById("menus").children),n=e+t,d=document.getElementById("nav")),window.innerWidth<=768||n>d.offsetWidth-120);d.classList.toggle("hide-menu",e)},y={open:()=>{anzhiyu.sidebarPaddingR(),anzhiyu.animateIn(document.getElementById("menu-mask"),"to_show 0.5s"),document.getElementById("sidebar-menus").classList.add("open"),t=!0},close:()=>{document.body.style.paddingRight="",anzhiyu.animateOut(document.getElementById("menu-mask"),"to_hide 0.5s"),document.getElementById("sidebar-menus").classList.remove("open"),t=!1}};function h(e){const l=e=>{let i="";const a=e=>e.replace(/"/g,"&quot;");return e.forEach(e=>{var t=e.alt?`alt="${a(e.alt)}"`:"",n=e.title?`title="${a(e.title)}"`:"",o=e.address||"",o=`
        <div class="fj-gallery-item">
          ${o?`<div class="tag-address">${o}</div>`:""}
          <img src="${e.url}" ${t+n}>
        </div>
      `;i+=o}),i},s=(e,t,n)=>{var n=Number(n),o=t.length;return n<o?e.insertAdjacentHTML("beforeend",l(t.splice(0,n))):(e.insertAdjacentHTML("beforeend",l(t)),e.classList.remove("lazyload")),window.lazyLoadInstance&&window.lazyLoadInstance.update(),n<o?n:o},n=(n,o)=>{const i=n.getAttribute("data-limit")??o.length;if(!n.classList.contains("lazyload")||o.length<i)n.innerHTML=l(o),n.nextElementSibling.style.display="none";else if(!n.classList.contains("btn_album_detail_lazyload")||n.classList.contains("page_img_lazyload")){s(n,o,i);const a=new IntersectionObserver((e,t)=>{e.forEach(e=>{e.isIntersecting&&setTimeout((e=s(n,o,i),fjGallery(n,"appendImages",n.querySelectorAll(`.fj-gallery-item:nth-last-child(-n+${e})`)),anzhiyu.loadLightbox(n.querySelectorAll("img")),void(e<Number(i)&&a.unobserve(n.nextElementSibling))),100)})});a.observe(n.nextElementSibling)}else{s(n,o,i);const t=()=>{var e=s(n,o,i);fjGallery(n,"appendImages",n.querySelectorAll(`.fj-gallery-item:nth-last-child(-n+${e})`)),anzhiyu.loadLightbox(n.querySelectorAll("img")),e<i&&n.nextElementSibling.removeEventListener("click",t)};n.nextElementSibling.addEventListener("click",t)}anzhiyu.initJustifiedGallery(n),anzhiyu.loadLightbox(n.querySelectorAll("img")),window.lazyLoadInstance&&window.lazyLoadInstance.update()};var t=()=>{e.forEach(t=>{t.classList.contains("url")?(async e=>{return(await fetch(e)).json()})(t.textContent).then(e=>{n(t,e)}):n(t,JSON.parse(t.textContent))})};window.fjGallery?t():(getCSS(""+GLOBAL_CONFIG.source.justifiedGallery.css),getScript(""+GLOBAL_CONFIG.source.justifiedGallery.js).then(t))}function g(){const o=document.getElementById("rightside"),i=window.innerHeight+56;let a=0,l=(document.body.scrollHeight<=i&&(o.style.cssText="opacity: 1; transform: translateX(-58px)"),0),s=!0;const r=document.getElementById("page-header"),c=document.getElementById("popup-window"),d="function"==typeof chatBtnHide,u="function"==typeof chatBtnShow;let m=!1;const e=document.getElementById("nav-music"),t=document.getElementById("footer"),y=document.getElementById("waterfall"),h=document.getElementById("percent"),g=document.getElementById("nav-totop"),p=document.getElementById("body-wrap");let L=document.getElementById("post-comment")||document.getElementById("footer");function v(e){var t=p.clientHeight,n=document.documentElement.clientHeight,t=n<t?t-n:document.documentElement.scrollHeight-n,n=Math.round(100*(e/t)),t=100<n?100:n<=0?1:n;h.textContent=t,function(e){if(e){var t=window.getComputedStyle(e).getPropertyValue("display");if("none"!=t)return t=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,e.offsetTop-document.documentElement.scrollTop<=t}}(L||90<t)&&20<e?(g.classList.add("long"),h.textContent="返回顶部"):(g.classList.remove("long"),h.textContent=t),y&&(n=e%document.documentElement.clientHeight,!m&&100+n>=document.documentElement.clientHeight?(console.info(n,document.documentElement.clientHeight),setTimeout(()=>{waterfall("#waterfall")},500)):setTimeout(()=>{y&&waterfall("#waterfall")},500))}var n=anzhiyu.throttle(()=>{var e=window.scrollY||document.documentElement.scrollTop,t=(n=(t=e)>l,l=t,n),n=Math.abs(a-e);60<e&&n<20&&0!=n||(c&&c.classList.contains("show-popup-window")&&60<e&&20<n&&0!=a&&anzhiyu.throttle(()=>{popupWindowTimer&&clearTimeout(popupWindowTimer),popupWindowTimer=setTimeout(()=>{c.classList.contains("popup-hide")||c.classList.add("popup-hide"),setTimeout(()=>{c.classList.remove("popup-hide"),c.classList.remove("show-popup-window")},1e3)},1e3)},1e3)(),26<(a=e)?(t?(r.classList.contains("nav-visible")&&r.classList.remove("nav-visible"),u&&!0===s&&(chatBtnHide(),s=!1)):(r.classList.contains("nav-visible")||r.classList.add("nav-visible"),d&&!1===s&&(chatBtnShow(),s=!0)),requestAnimationFrame(()=>{anzhiyu.initThemeColor(),r.classList.add("nav-fixed")}),"0"===window.getComputedStyle(o).getPropertyValue("opacity")&&(o.style.cssText="opacity: 0.8; transform: translateX(-58px)")):(e<=5&&requestAnimationFrame(()=>{r.classList.remove("nav-fixed"),r.classList.remove("nav-visible"),anzhiyu.initThemeColor()}),o.style.cssText="opacity: ''; transform: ''"),document.body.scrollHeight<=i&&(o.style.cssText="opacity: 0.8; transform: translateX(-58px)"),v(e))},96);t&&anzhiyu.intersectionObserver(()=>{t&&e&&768<document.body.clientWidth&&(e.style.bottom="-10px",e.style.opacity="0"),m=!0},()=>{t&&e&&768<document.body.clientWidth&&(e.style.bottom="20px",e.style.opacity="1")})().observe(t),n(),anzhiyu.addEventListenerPjax(window,"scroll",n,{passive:!0})}function p(){const c=GLOBAL_CONFIG_SITE.isToc,d=GLOBAL_CONFIG.isAnchor;var t=document.getElementById("article-container");if(t&&(c||d)){let e,a,l,s;if(c){const o=document.getElementById("card-toc");a=o.querySelector(".toc-content"),e=a.querySelectorAll(".toc-link"),s=a.classList.contains("is-expand");anzhiyu.addEventListenerPjax(a,"click",e=>{var t=e.target.closest(".toc-link");t&&(e.preventDefault(),anzhiyu.scrollToDest(anzhiyu.getEleTop(document.getElementById(decodeURI(t.getAttribute("href")).replace("#","")))-60,300),window.innerWidth<900)&&o.classList.remove("open")}),l=e=>{var e=e.getBoundingClientRect().top,t=a.scrollTop;e>document.documentElement.clientHeight-100&&(a.scrollTop=t+150),e<100&&(a.scrollTop=t-150)}}t=t.querySelectorAll("h1,h2,h3,h4,h5,h6");const u=Array.from(t).filter(e=>"CrawlerTitle"!==e.id);let r="";const n=function(n){if(0===n)return!1;let o="",i="";if(u.forEach(function(e,t){n>anzhiyu.getEleTop(e)-80&&(e=e.id,o=e?"#"+encodeURI(e):"",i=t)}),r!==i&&(d&&anzhiyu.updateAnchor(o),r=i,c)&&(a.querySelectorAll(".active").forEach(e=>{e.classList.remove("active")}),""!==o)){const t=e[i];if(t.classList.add("active"),setTimeout(()=>{l(t)},0),!s){let e=t.parentNode;for(;!e.matches(".toc");e=e.parentNode)e.matches("li")&&e.classList.add("active")}}};t=anzhiyu.throttle(()=>{var e=window.scrollY||document.documentElement.scrollTop;n(e)},100);anzhiyu.addEventListenerPjax(window,"scroll",t,{passive:!0})}}function L(e){e.forEach(e=>{var t=e.getAttribute("datetime");e.textContent=anzhiyu.diffDate(t,!0),e.style.display="inline"})}const o=t=>{const n=(window.globalFn||{}).themeChange||{};n&&(Object.keys(n).forEach(e=>{(0,n[e])(t)}),rm&&rm.hideRightMenu(),e.querySelector(".menu-darkmode-text").textContent="light"===t?"深色模式":"浅色模式",GLOBAL_CONFIG_SITE.isPost||(document.querySelector(":root").style.setProperty("--anzhiyu-bar-background","var(--anzhiyu-meta-theme-color)"),requestAnimationFrame(()=>{anzhiyu.initThemeColor()}),document.documentElement.style.setProperty("--anzhiyu-main",getComputedStyle(document.documentElement).getPropertyValue("--anzhiyu-theme")),document.documentElement.style.setProperty("--anzhiyu-theme-op",getComputedStyle(document.documentElement).getPropertyValue("--anzhiyu-main")+"23"),document.documentElement.style.setProperty("--anzhiyu-theme-op-deep",getComputedStyle(document.documentElement).getPropertyValue("--anzhiyu-main")+"dd")))},l={readmode:()=>{const e=document.body,t=(e.classList.add("read-mode"),document.createElement("button")),n=(t.type="button",t.className="anzhiyufont anzhiyu-icon-xmark exit-readmode",e.appendChild(t),()=>{e.classList.remove("read-mode"),t.remove(),t.removeEventListener("click",n)});t.addEventListener("click",n)},darkmode:()=>{var e="dark"===document.documentElement.getAttribute("data-theme")?"light":"dark";"dark"==e?(activateDarkMode(),void 0!==GLOBAL_CONFIG.Snackbar&&anzhiyu.snackbarShow(GLOBAL_CONFIG.Snackbar.day_to_night)):(activateLightMode(),void 0!==GLOBAL_CONFIG.Snackbar&&anzhiyu.snackbarShow(GLOBAL_CONFIG.Snackbar.night_to_day)),saveToLocal.set("theme",e,2),o(e)},"rightside-config":e=>{const t=e.firstElementChild;t.classList.contains("show")&&(t.classList.add("status"),setTimeout(()=>{t.classList.remove("status")},300)),t.classList.toggle("show")},"go-up":()=>{anzhiyu.scrollToDest(0,500)},"hide-aside-btn":()=>{var e=document.documentElement.classList,t=e.contains("hide-aside")?"show":"hide";saveToLocal.set("aside-status",t,2),e.toggle("hide-aside")},"mobile-toc-button":e=>{const t=document.getElementById("card-toc");t.style.transformOrigin=`right ${e.getBoundingClientRect().top+17}px`,t.style.transition="transform 0.3s ease-in-out",t.classList.toggle("open"),t.addEventListener("transitionend",()=>{t.style.transition="",t.style.transformOrigin=""},{once:!0})},"chat-btn":()=>{window.chatBtnFn()},translateLink:()=>{window.translateFn.translatePage()}},v=(document.getElementById("rightside").addEventListener("click",function(e){e=e.target.closest("[id]");e&&l[e.id]&&l[e.id](this)}),document.addEventListener("touchstart",e=>{anzhiyu.removeRewardMask()},{passive:!0}),()=>{var e=document.querySelectorAll("#article-container .tabs");if(e.length){const i=(e,t)=>{Array.from(e).forEach(e=>{e.classList.remove("active"),e!==t&&e.id!==t||e.classList.add("active")})};e.forEach(e=>{var n,t,o=!!e.querySelectorAll(".gallery-container");n=o,anzhiyu.addEventListenerPjax(e.firstElementChild,"click",function(e){var t,e=e.target.closest("button");e.classList.contains("active")||(i(this.children,e),this.classList.remove("no-default"),e=e.getAttribute("data-href"),t=this.nextElementSibling,i(t.children,e),n&&0<(t=t.querySelectorAll(`#${e} .fj-gallery`)).length&&anzhiyu.initJustifiedGallery(t))}),t=e,anzhiyu.addEventListenerPjax(t.lastElementChild,"click",e=>{e.target.closest("button")&&anzhiyu.scrollToDest(anzhiyu.getEleTop(t),300)})})}}),E=e=>{return/^(rgb|RGB)/.test(e)?e.replace(/(?:\(|\)|rgb|RGB)*/g,"").split(",").reduce((e,t)=>{return e+Number(t).toString(16).padStart(2,"0")},"#"):/^#([0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/.test(e)&&4===e.length?Array.from(e.slice(1)).reduce((e,t)=>e+t+t,"#"):e},f=(e,t)=>{var n=e.startsWith("#"),e=(n&&(e=e.slice(1)),parseInt(e,16)),o=(e,t)=>255<(e+=t)?255:e<0?0:e,i=o(e>>16,t),a=o(e>>8&255,t),o=o(255&e,t);return(n?"#":"")+String("000000"+(o|a<<8|i<<16).toString(16)).slice(-6)},z=e=>{var[,e,t,n]=(e=>{e=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(e,t,n,o)=>t+t+n+n+o+o);e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return e?`rgb(${parseInt(e[1],16)}, ${parseInt(e[2],16)}, ${parseInt(e[3],16)})`:null})(e).match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);return.5<=(299*e+587*t+114*n)/255e3?"light":"dark"};function i(){Promise.all([{url:"https://sdk.51.la/js-sdk-pro.min.js",charset:"UTF-8",crossorigin:!1,id:"LA_COLLECT"},{url:"https://sdk.51.la/perf/js-sdk-perf.min.js",crossorigin:"anonymous"}].map(({url:e,charset:t,crossorigin:n,id:o})=>{return[i,a="UTF-8",l,s]=[e,t,n,o],new Promise((t,e)=>{const n=document.createElement("script");n.src=i,n.async=!0,s&&n.setAttribute("id",s),a&&n.setAttribute("charset",a),l&&n.setAttribute("crossorigin",l),n.onerror=e,n.onload=n.onreadystatechange=function(){var e=this.readyState;e&&"loaded"!==e&&"complete"!==e||(n.onload=n.onreadystatechange=null,t())},document.head.appendChild(n)});var i,a,l,s})).then(()=>{LA.init({id:GLOBAL_CONFIG.LA51.ck,ck:GLOBAL_CONFIG.LA51.ck}),(new LingQue.Monitor).init({id:GLOBAL_CONFIG.LA51.LingQueMonitorID,sendSuspicious:!0})}).catch(e=>{console.error("加载51a统计异常，本地加载403是正常情况:",e)})}function b(e,t){e=document.getElementById(e);e&&t?(t=e.querySelector(t))&&t.addEventListener("click",l.darkmode):e&&e.addEventListener("click",l.darkmode)}window.onkeydown=function(e){123===e.keyCode&&anzhiyu.snackbarShow("开发者模式已打开，请遵循GPL协议",!1)};if(window.refreshFn=function(){var e,t,n,o;if(m(!0),d.classList.add("show"),themeColorMeta=document.querySelector('meta[name="theme-color"]'),pageHeaderEl=document.getElementById("page-header"),navMusicEl=document.getElementById("nav-music"),consoleEl=document.getElementById("console"),b("console",".darkmode_switchbutton"),GLOBAL_CONFIG_SITE.isPost?(void 0!==GLOBAL_CONFIG.noticeOutdate&&(n=GLOBAL_CONFIG.noticeOutdate,(o=anzhiyu.diffDate(GLOBAL_CONFIG_SITE.postUpdate))>=n.limitDay)&&((t=document.createElement("div")).className="post-outdate-notice",t.textContent=n.messagePrev+" "+o+" "+n.messageNext,o=document.getElementById("article-container"),"top"===n.position?o.insertBefore(t,o.firstChild):o.appendChild(t)),GLOBAL_CONFIG.relativeDate.post&&L(document.querySelectorAll("#post-meta time"))):((GLOBAL_CONFIG.relativeDate.homepage||GLOBAL_CONFIG.relativeDate.simplehomepage)&&L(document.querySelectorAll("#recent-posts time")),GLOBAL_CONFIG.runtime&&(n=document.getElementById("runtimeshow"))&&(o=n.getAttribute("data-publishDate"),n.textContent=anzhiyu.diffDate(o)+" "+GLOBAL_CONFIG.runtime),(t=document.getElementById("last-push-date"))&&(e=t.getAttribute("data-lastPushDate"),t.textContent=anzhiyu.diffDate(e,!0)),(e=document.querySelector("#aside-cat-list.expandBtn"))&&anzhiyu.addEventListenerPjax(e,"click",e=>{var t=e.target;"I"===t.nodeName&&(e.preventDefault(),t.parentNode.classList.toggle("expand"))},!0)),GLOBAL_CONFIG.diytitle){let e=GLOBAL_CONFIG.diytitle.leaveTitle,t=GLOBAL_CONFIG.diytitle.backTitle,n=document.title,o;document.addEventListener("visibilitychange",function(){document.hidden?(document.title=e,clearTimeout(o)):(document.title=t+n,o=setTimeout(function(){document.title=n},2e3))})}p(),GLOBAL_CONFIG_SITE.isHome&&(i=document.getElementById("scroll-down"))&&anzhiyu.addEventListenerPjax(i,"click",()=>{var e=document.getElementById("bbTimeList");e?anzhiyu.scrollToDest(e.offsetTop-62,300):anzhiyu.scrollToDest(document.getElementById("home_top").offsetTop-60,300)}),u(),GLOBAL_CONFIG.isPhotoFigcaption&&document.querySelectorAll("#article-container img").forEach(function(e){var t,n=e.parentNode,o=e.title||e.alt;o&&!n.parentNode.classList.contains("justified-gallery")&&((t=document.createElement("div")).className="img-alt is-center",t.textContent=o,n.insertBefore(t,e.nextSibling))}),g(),window.scrollCollect&&window.scrollCollect();var i=document.querySelectorAll("#content-inner .fj-gallery"),a=(i.length&&h(i),anzhiyu.loadLightbox(document.querySelectorAll("#article-container img:not(.no-lightbox)")),(a=document.querySelectorAll("#article-container table")).length&&a.forEach(e=>{e.closest(".highlight")||anzhiyu.wrap(e,"div",{class:"table-wrap"})}),document.querySelectorAll("#article-container .hide-button"));if(a.length){const l=function(e){this.classList.add("open");var t=this.nextElementSibling.querySelectorAll(".gallery-container");t.length&&addJustifiedGallery(t)};a.forEach(e=>{e.addEventListener("click",l,{once:!0})})}v();var a=document.getElementById("switch-btn");if(a){let e=!1;const c=document.getElementById("post-comment");anzhiyu.addEventListenerPjax(a,"click",()=>{c.classList.toggle("move"),e||"function"!=typeof loadOtherComment||(e=!0,loadOtherComment())})}if(document.getElementById("toggle-menu").addEventListener("click",()=>{y.open()}),document.getElementById("post-comment")){let t=1,n="",a=document.createElement("div"),l=(a.id="owo-big",document.querySelector("body"));function s(i){"IMG"==i.target.tagName&&t&&(t=0,n=setTimeout(()=>{var e=3*i.target.clientHeight,t=3*i.target.clientWidth;let n=i.x-i.offsetX-(t-i.target.clientWidth)/2;n+t>l.clientWidth&&(n-=n+t-l.clientWidth+10),n<0&&(n=10);var o=i.y-i.offsetY;a.style.height=e+"px",a.style.width=t+"px",a.style.left=n+"px",a.style.top=o+"px",a.style.display="flex",a.innerHTML=`<img src="${i.target.src}">`},100))}function r(e){a.style.display="none",t=1,clearTimeout(n)}l.appendChild(a),new MutationObserver(e=>{e.forEach(e=>{var t=e.addedNodes;for(let e=0;e<t.length;e++){var n=t[e];n.nodeType===Node.ELEMENT_NODE&&n.classList.contains("OwO-body")&&!n.classList.contains("comment-barrage")&&((n=n).addEventListener("contextmenu",e=>e.preventDefault()),n.addEventListener("mouseover",s),n.addEventListener("mouseout",r))}})}).observe(document.getElementById("post-comment"),{childList:!0,subtree:!0})}(a=document.querySelector(".topGroup"))&&a.addEventListener("mouseleave",function(){document.getElementById("todayCard").classList.remove("hide"),document.getElementById("todayCard").style.zIndex=1}),(async()=>{var t=document.querySelector(":root"),n=document.getElementById("post-top-bg")?.src;if(n){if(GLOBAL_CONFIG.mainTone)if(GLOBAL_CONFIG_SITE.postMainColor){let e=GLOBAL_CONFIG_SITE.postMainColor;"light"===z(e)&&(e=f(E(e),-40)),t.style.setProperty("--anzhiyu-bar-background",e),requestAnimationFrame(()=>{anzhiyu.initThemeColor()}),GLOBAL_CONFIG.mainTone.cover_change&&(document.documentElement.style.setProperty("--anzhiyu-main",e),document.documentElement.style.setProperty("--anzhiyu-theme-op",getComputedStyle(document.documentElement).getPropertyValue("--anzhiyu-main")+"23"),document.documentElement.style.setProperty("--anzhiyu-theme-op-deep",getComputedStyle(document.documentElement).getPropertyValue("--anzhiyu-main")+"dd"))}else{var o="var(--anzhiyu-theme)";let e="";"cdn"==GLOBAL_CONFIG.mainTone.mode||"both"==GLOBAL_CONFIG.mainTone.mode?e=n+"?imageAve":"api"==GLOBAL_CONFIG.mainTone.mode&&(e=GLOBAL_CONFIG.mainTone.api+n);try{var i=await fetch(e);if(i.ok&&i.headers.get("content-type")?.includes("application/json")){var a=await i.json();let e="cdn"==GLOBAL_CONFIG.mainTone.mode||"both"==GLOBAL_CONFIG.mainTone.mode?"#"+a.RGB.slice(2):a.RGB;"light"===z(e)&&(e=f(E(e),-40)),t.style.setProperty("--anzhiyu-bar-background",e),requestAnimationFrame(()=>{anzhiyu.initThemeColor()}),GLOBAL_CONFIG.mainTone.cover_change&&(document.documentElement.style.setProperty("--anzhiyu-main",e),document.documentElement.style.setProperty("--anzhiyu-theme-op",getComputedStyle(document.documentElement).getPropertyValue("--anzhiyu-main")+"23"),document.documentElement.style.setProperty("--anzhiyu-theme-op-deep",getComputedStyle(document.documentElement).getPropertyValue("--anzhiyu-main")+"dd"))}else if("both"==GLOBAL_CONFIG.mainTone.mode)try{var l=await fetch(GLOBAL_CONFIG.mainTone.api+n);if(l.ok&&l.headers.get("content-type")?.includes("application/json")){let e=(await l.json()).RGB;"light"===z(e)&&(e=f(E(e),-40)),t.style.setProperty("--anzhiyu-bar-background",e),requestAnimationFrame(()=>{anzhiyu.initThemeColor()}),GLOBAL_CONFIG.mainTone.cover_change&&(document.documentElement.style.setProperty("--anzhiyu-main",e),document.documentElement.style.setProperty("--anzhiyu-theme-op",getComputedStyle(document.documentElement).getPropertyValue("--anzhiyu-main")+"23"),document.documentElement.style.setProperty("--anzhiyu-theme-op-deep",getComputedStyle(document.documentElement).getPropertyValue("--anzhiyu-main")+"dd"))}else t.style.setProperty("--anzhiyu-bar-background",o),requestAnimationFrame(()=>{anzhiyu.initThemeColor()}),document.documentElement.style.setProperty("--anzhiyu-main",o)}catch{t.style.setProperty("--anzhiyu-bar-background",o),requestAnimationFrame(()=>{anzhiyu.initThemeColor()}),document.documentElement.style.setProperty("--anzhiyu-main",o)}else t.style.setProperty("--anzhiyu-bar-background",o),requestAnimationFrame(()=>{anzhiyu.initThemeColor()}),document.documentElement.style.setProperty("--anzhiyu-main",o)}catch(e){console.error("Error fetching data:",e),t.style.setProperty("--anzhiyu-bar-background",o),requestAnimationFrame(()=>{anzhiyu.initThemeColor()}),document.documentElement.style.setProperty("--anzhiyu-main",o)}}}else t.style.setProperty("--anzhiyu-bar-background","var(--anzhiyu-meta-theme-color)"),requestAnimationFrame(()=>{anzhiyu.initThemeColor()}),document.documentElement.style.setProperty("--anzhiyu-main",getComputedStyle(document.documentElement).getPropertyValue("--anzhiyu-theme")),document.documentElement.style.setProperty("--anzhiyu-theme-op",getComputedStyle(document.documentElement).getPropertyValue("--anzhiyu-main")+"23"),document.documentElement.style.setProperty("--anzhiyu-theme-op-deep",getComputedStyle(document.documentElement).getPropertyValue("--anzhiyu-main")+"dd")})(),(a=document.getElementById("toPageText"))&&a.addEventListener("keydown",e=>{13===e.keyCode&&(anzhiyu.toPage(),e=document.getElementById("toPageButton").href,pjax.loadUrl(e))}),anzhiyu.addEventListenerPjax(document.getElementById("toggle-menu"),"click",()=>{y.open()}),document.getElementById("page-name").innerText=document.title.split(" | "+GLOBAL_CONFIG_SITE.configTitle)[0],anzhiyu.initIndexEssay(),anzhiyu.changeTimeInEssay(),anzhiyu.removeBodyPaceClass(),anzhiyu.qrcodeCreate(),anzhiyu.changeTimeInAlbumDetail(),anzhiyu.reflashEssayWaterFall(),anzhiyu.sayhi(),anzhiyu.stopImgRightDrag(),anzhiyu.addNavBackgroundInit(),anzhiyu.setValueToBodyType(),anzhiyu.catalogActive(),anzhiyu.tagsPageActive(),anzhiyu.categoriesBarActive(),anzhiyu.topCategoriesBarScroll(),anzhiyu.switchRightClickMenuHotReview(),anzhiyu.getCustomPlayList(),anzhiyu.addEventListenerConsoleMusicList(!1),anzhiyu.initPaginationObserver(),setTimeout(()=>{var e;e=document.querySelectorAll("input, textarea"),Array.from(e).filter(e=>{"center-console"===e.id&&e.id}).forEach(e=>{e.addEventListener("focus",()=>{anzhiyu_intype=!0}),e.addEventListener("blur",()=>{anzhiyu_intype=!1})}),"function"==typeof addFriendLinksInFooter&&addFriendLinksInFooter()},200)},refreshFn(),window.addEventListener("resize",()=>{m(!1),t&&anzhiyu.isHidden(document.getElementById("toggle-menu"))&&y.close()}),document.getElementById("menu-mask").addEventListener("click",e=>{y.close()}),e=document.getElementById("rightMenu"),b("menu-darkmode"),b("sidebar",".darkmode_switchbutton"),document.querySelector("#sidebar-menus .menus_items")&&document.querySelector("#sidebar-menus .menus_items").addEventListener("click",e=>{e=e.target.closest(".site-page.group");e&&e.classList.toggle("hide")}),GLOBAL_CONFIG.islazyload&&(window.lazyLoadInstance=new LazyLoad({elements_selector:"img",threshold:0,data_src:"lazy-src"})),void 0!==GLOBAL_CONFIG.copyright){const{limitCount:C,languages:B,copy:O,copyrightEbable:w}=GLOBAL_CONFIG.copyright;document.body.addEventListener("copy",t=>{if(O&&anzhiyu.snackbarShow(B.copySuccess),w){t.preventDefault();var n=window.getSelection(0).toString();let e=n;return n.length>C&&(e=`${n}


${B.author}
${B.link}${window.location.href}
${B.source}
`+B.info),(t.clipboardData?t:window).clipboardData.setData("text",e)}})}if(GLOBAL_CONFIG.navMusic){const G=setInterval(()=>{if(navMusicEl&&navMusicEl.querySelector("#nav-music meting-js").aplayer){clearInterval(G);navMusicEl.querySelector("#nav-music meting-js").aplayer.on("pause",function(){navMusicEl.classList.remove("playing"),document.getElementById("menu-music-toggle").innerHTML='<i class="anzhiyufont anzhiyu-icon-play"></i><span>播放音乐</span>',document.getElementById("nav-music-hoverTips").innerHTML="音乐已暂停",document.querySelector("#consoleMusic").classList.remove("on"),anzhiyu_musicPlaying=!1,navMusicEl.classList.remove("stretch")}),navMusicEl.querySelector("#nav-music meting-js").aplayer.on("play",function(){navMusicEl.classList.add("playing"),document.getElementById("menu-music-toggle").innerHTML='<i class="anzhiyufont anzhiyu-icon-pause"></i><span>暂停音乐</span>',document.querySelector("#consoleMusic").classList.add("on"),anzhiyu_musicPlaying=!0})}},16)}function a(e){var t=27===e.keyCode,n=e.shiftKey,o=anzhiyu_keyboard,i=anzhiyu_intype,t=(t&&(anzhiyu.hideLoading(),anzhiyu.hideConsole(),rm)&&rm.hideRightMenu(),GLOBAL_CONFIG.shortcutKey.delay||100);const a=GLOBAL_CONFIG.shortcutKey.shiftDelay||200;o&&n&&!i&&(anzhiyu_keyUpShiftDelayEvent_timeoutId=setTimeout(()=>{switch(e.keyCode){case 16:anzhiyu_keyUpEvent_timeoutId=setTimeout(()=>{document.querySelector("#keyboard-tips").classList.add("show")},a);break;case 65:anzhiyu.switchConsole();break;case 77:anzhiyu.musicToggle();break;case 75:anzhiyu.keyboardToggle();break;case 73:anzhiyu.rightMenuToggle();break;case 82:toRandomPost();break;case 72:pjax.loadUrl("/");break;case 68:l.darkmode();break;case 70:pjax.loadUrl("/fcircle/");break;case 76:pjax.loadUrl("/link/");break;case 80:pjax.loadUrl("/about/")}e.preventDefault()},t))}function s(e){anzhiyu_keyUpEvent_timeoutId&&clearTimeout(anzhiyu_keyUpEvent_timeoutId),anzhiyu_keyUpShiftDelayEvent_timeoutId&&clearTimeout(anzhiyu_keyUpShiftDelayEvent_timeoutId),16===e.keyCode&&document.querySelector("#keyboard-tips").classList.remove("show")}if(GLOBAL_CONFIG.shortcutKey&&document.getElementById("consoleKeyboard")&&(localStorage.setItem("keyboardToggle","true"),document.getElementById("consoleKeyboard").classList.add("on"),anzhiyu_keyboard=!0,anzhiyu_keyboard=!!localStorage.getItem("keyboardToggle")&&localStorage.getItem("keyboardToggle"),window.onfocus=function(){document.getElementById("keyboard-tips").classList.remove("show")},(c=window).removeEventListener("keydown",a),c.removeEventListener("keyup",s),c.addEventListener("keydown",a),c.addEventListener("keyup",s)),GLOBAL_CONFIG.autoDarkmode&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",e=>{void 0===saveToLocal.get("theme")&&(e.matches?o("dark"):o("light"))}),GLOBAL_CONFIG.greetingBox){var r=GLOBAL_CONFIG.greetingBox.list,c=GLOBAL_CONFIG.greetingBox.default;let e=document.createElement("div"),n=(e.id="greeting",setTimeout(()=>{e.classList.add("shown")},1e3),document.getElementById("greetingBox"));if(n){n.appendChild(e);var I=(new Date).getHours();let t=c;for(let e=0;e<r.length;e++)if(I>=r[e].startTime&&I<=r[e].endTime){t=r[e].greeting;break}e.innerHTML=t,setTimeout(()=>{e.classList.remove("shown"),setTimeout(()=>{n.remove()},500)},3e3)}}GLOBAL_CONFIG.LA51&&i()});